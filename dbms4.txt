Enter password: ****
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 12
Server version: 5.5.61 MySQL Community Server (GPL)

Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> create database book_dealer;
Query OK, 1 row affected (0.00 sec)

mysql> use book_dealer;
Database changed
mysql> create table author(authorid int primary key, name char(10), city char(10), country char(10));
Query OK, 0 rows affected (0.06 sec)

mysql> create table publisher(publisherid int primary key, name char(10), city char(10), country char(10));
Query OK, 0 rows affected (0.05 sec)

mysql> create table catalog(bookid int primary key, title char(10), authorid int references author(authorid), publisherid int references publisher(publisherid), categoryid int, year int);
Query OK, 0 rows affected (0.05 sec)

mysql> alter table catalog add price int;
Query OK, 0 rows affected (0.06 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc catalog
    -> \c
mysql> desc catalog;
+-------------+----------+------+-----+---------+-------+
| Field       | Type     | Null | Key | Default | Extra |
+-------------+----------+------+-----+---------+-------+
| bookid      | int(11)  | NO   | PRI | NULL    |       |
| title       | char(10) | YES  |     | NULL    |       |
| authorid    | int(11)  | YES  |     | NULL    |       |
| publisherid | int(11)  | YES  |     | NULL    |       |
| categoryid  | int(11)  | YES  |     | NULL    |       |
| year        | int(11)  | YES  |     | NULL    |       |
| price       | int(11)  | YES  |     | NULL    |       |
+-------------+----------+------+-----+---------+-------+
7 rows in set (0.06 sec)

mysql> create table category(categoryid int primary key, description char(20));
Query OK, 0 rows affected (0.06 sec)

mysql> alter table catalog add foreign key (categoryid) references category(categoryid);
Query OK, 0 rows affected (0.03 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> insert into author values(101, 'p b kottur', 'bangalore', 'india');
Query OK, 1 row affected (0.04 sec)

mysql> insert into author values(102, 'balguru', 'delhi', 'india');
Query OK, 1 row affected (0.05 sec)

mysql> insert into author values(103, 'padma r', 'hyderabad', 'india');
Query OK, 1 row affected (0.04 sec)

mysql> insert into author values(104, 'robert', 'pans', 'usa');
Query OK, 1 row affected (0.05 sec)

mysql> insert into author values(105, 'wilson', 'mumbai', 'india');
Query OK, 1 row affected (0.05 sec)

mysql> insert into publisher values(1001, 'pearson', 'pune', ' india');
Query OK, 1 row affected (0.05 sec)

mysql> insert into publisher values(2002, 'tata', 'delhi', ' india');
Query OK, 1 row affected (0.05 sec)

mysql> insert into publisher values(3003, 'pearson', 'bangalore', ' india');
Query OK, 1 row affected (0.04 sec)

mysql> insert into publisher values(4004, 'tata', 'hyderabad', ' india');
Query OK, 1 row affected (0.04 sec)

mysql> insert into publisher values(5005, 'pearson', 'gadag', ' india');
Query OK, 1 row affected (0.05 sec)

mysql> insert into catalog values(1000, 'java', 101, 1001, 100, 2002, 1590);
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`book_dealer`.`catalog`, CONSTRAINT `catalog_ibfk_1` FOREIGN KEY (`categoryid`) REFERENCES `category` (`categoryid`))
mysql> insert into category values(100, 'networking');
Query OK, 1 row affected (0.05 sec)

mysql> insert into category values(200, 'programming');
Query OK, 1 row affected (0.00 sec)

mysql> insert into category values(300, 'developing');
Query OK, 1 row affected (0.04 sec)

mysql> insert into category values(400, 'security');
Query OK, 1 row affected (0.04 sec)

mysql> insert into category values(500, 'electronics');
Query OK, 1 row affected (0.00 sec)

mysql> insert into catalog values(1000, 'java', 101, 1001, 100, 2002, 1590);
Query OK, 1 row affected (0.04 sec)

mysql> insert into catalog values(1001, 'java', 102, 2002, 200, 2003, 2000);
Query OK, 1 row affected (0.04 sec)

mysql> insert into catalog values(1002, 'c++', 103, 3003, 300, 2005, 1500);
Query OK, 1 row affected (0.04 sec)

mysql> insert into catalog values(1003, 'dbms', 104, 4004, 400, 2008, 500);
Query OK, 1 row affected (0.05 sec)

mysql> insert into catalog values(1004, 'os', 105, 5005, 500, 2006, 500);
Query OK, 1 row affected (0.00 sec)

mysql> show tables;
+-----------------------+
| Tables_in_book_dealer |
+-----------------------+
| author                |
| catalog               |
| category              |
| publisher             |
+-----------------------+
4 rows in set (0.00 sec)

mysql> create table order_details(orderno int, bookid int references catalog(bookid), quantity int);
Query OK, 0 rows affected (0.06 sec)

mysql> insert into order_details values(1010, 1000, 200);
Query OK, 1 row affected (0.04 sec)

mysql> insert into order_details values(1011, 1001, 300);
Query OK, 1 row affected (0.05 sec)

mysql> insert into order_details values(1012, 1002, 205);
Query OK, 1 row affected (0.05 sec)

mysql> insert into order_details values(1013, 1003, 305);
Query OK, 1 row affected (0.05 sec)

mysql> insert into order_details values(1014, 1004, 500);
Query OK, 1 row affected (0.04 sec)

mysql> select authorid, name, city, country from author where authorid in (select authorid from catalog where year > 2000 and price > (select avg(price) from catalog group by authorid, name, city, country having count(*) >= 2));
Empty set (0.04 sec)

mysql> select name from author a, order_details o, catalog c where o.bookid = c.bookid and a.authorid = c.authorid and o.quantity = (select max(quantity) from order_details);
+--------+
| name   |
+--------+
| wilson |
+--------+
1 row in set (0.04 sec)

mysql> update catalog set price = 1.1 * price where publisherid in (select publisherid from publisher where name = 'pearson');
Query OK, 3 rows affected (0.00 sec)
Rows matched: 3  Changed: 3  Warnings: 0

mysql> select * from publisher;
+-------------+---------+-----------+---------+
| publisherid | name    | city      | country |
+-------------+---------+-----------+---------+
|        1001 | pearson | pune      |  india  |
|        2002 | tata    | delhi     |  india  |
|        3003 | pearson | bangalore |  india  |
|        4004 | tata    | hyderabad |  india  |
|        5005 | pearson | gadag     |  india  |
+-------------+---------+-----------+---------+
5 rows in set (0.00 sec)

mysql> select * from catalog;
+--------+-------+----------+-------------+------------+------+-------+
| bookid | title | authorid | publisherid | categoryid | year | price |
+--------+-------+----------+-------------+------------+------+-------+
|   1000 | java  |      101 |        1001 |        100 | 2002 |  1749 |
|   1001 | java  |      102 |        2002 |        200 | 2003 |  2000 |
|   1002 | c++   |      103 |        3003 |        300 | 2005 |  1650 |
|   1003 | dbms  |      104 |        4004 |        400 | 2008 |   500 |
|   1004 | os    |      105 |        5005 |        500 | 2006 |   550 |
+--------+-------+----------+-------------+------------+------+-------+
5 rows in set (0.00 sec)

mysql>